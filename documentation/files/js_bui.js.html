<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>js/bui.js - exi-ui-utils</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="exi-ui-utils" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: js/bui.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
BUI = {
	//interval : 60000,
	interval : 40000,
	rainbow : function(numOfSteps, step) {
		// This function generates vibrant, &quot;evenly spaced&quot; colours (i.e. no clustering). This is ideal for creating easily distinguishable vibrant markers in Google Maps and other apps.
		// Adam Cole, 2011-Sept-14
		// HSV to RBG adapted from: http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript
		var r, g, b;
		var h = step / numOfSteps;
		var i = ~~(h * 6);
		var f = h * 6 - i;
		var q = 1 - f;
		switch (i % 6) {
			case 0:
				r = 1; g = f; b = 0;
				break;
			case 1:
				r = q; g = 1; b = 0;
				break;
			case 2:
				r = 0; g = 1; b = f;
				break;
			case 3:
				r = 0; g = q; b = 1;
				break;
			case 4:
				r = f; g = 0; b = 1;
				break;
			case 5:
				r = 1; g = 0; b = q;
				break;
		}
		var c = &quot;#&quot; + (&quot;00&quot; + (~~(r * 255)).toString(16)).slice(-2) + (&quot;00&quot; + (~~(g * 255)).toString(16)).slice(-2) + (&quot;00&quot; + (~~(b * 255)).toString(16)).slice(-2);
		return (c);
	},
	groupBy : function(array , f ){
		/**
		 * Groups an array based on a function
		 * Example:
		 * 		data =  this.groupBy(data, function(item){
		 * 			return [item.bufferAcronym];
		 *		});
		 * 
		 */
		  var groups = {};
		  array.forEach( function( o )
		  {
		    var group = JSON.stringify( f(o) );
		    groups[group] = groups[group] || [];
		    groups[group].push( o );  
		  });
		  return Object.keys(groups).map( function( group ){
			  return groups[group]; 
		  });
	},
		
	getFileNameByPath : function(filePath) {
		if (filePath != null){
			var split = filePath.split(&quot;/&quot;);
			if (split.length &gt; 0){
				return split[split.length - 1];
			}
		}
		return &quot;Not file&quot;;
	},
	getUpdateInterval : function() {
		this.interval = this.interval + 2000;
		return this.interval;
	},
	getRadiationDamageThreshold : function() {
		return 0.7;
	},
	getQualityThreshold : function() {
		return 0.7;
	},
	getCreateShipmentURL : function() {
		return &#x27;/ispyb/user/viewProjectList.do?reqCode=display&amp;menu=create_shipment&#x27;;
	},
	getCreateShipmentList : function() {
		return &#x27;/ispyb/user/viewProjectList.do?reqCode=display&amp;menu=list_shipment&#x27;;
	},
	getShippingURL : function(shippingId) {
		return &#x27;/ispyb/user/viewProjectList.do?reqCode=display&amp;menu=shipment&amp;shippingId=&#x27; + shippingId;
	},

	getMacromoleculeResultsURLByMultipleSearch : function(array) {
		return &#x27;/ispyb/user/viewProjectList.do?reqCode=display&amp;menu=macromolecule&amp;search=&#x27; +
		        JSON.stringify(array).replace(new RegExp(&quot;\&quot;&quot;, &#x27;g&#x27;), &quot;&#x27;&quot;);
	},
	getMacromoleculeResultsURL : function(macromoleculeId) {
		return &#x27;/ispyb/user/viewProjectList.do?reqCode=display&amp;menu=macromolecule&amp;macromoleculeId=&#x27; + macromoleculeId;
	},
	getMacromoleculeBufferResultsURL : function(macromoleculeId, bufferId) {
		return &#x27;/ispyb/user/viewProjectList.do?reqCode=display&amp;menu=macromolecule&amp;bufferId=&#x27; + bufferId + &#x27;&amp;macromoleculeId=&#x27; + macromoleculeId;
	},

	getMacromoleculeHeader : function(macromoleculeId) {

		function getHTMLSource(macromoleculeId) {
			if (macromoleculeId != null) {
				var html = BUI.createFormLabel(&quot;Name :&quot;, BIOSAXS.proposal.getMacromoleculeById(macromoleculeId).name, 75, 400);
				html = html + BUI.createFormLabel(&quot;Acronym :&quot;, BIOSAXS.proposal.getMacromoleculeById(macromoleculeId).acronym, 75, 400);
				if (BIOSAXS.proposal.getMacromoleculeById(macromoleculeId).comments != null) {
					html = html + BUI.createFormLabel(&quot;Comments :&quot;, BIOSAXS.proposal.getMacromoleculeById(macromoleculeId).comments, 75, 400);
				}
				return html;
			}
		}

		return Ext.create(&#x27;Ext.container.Container&#x27;, {
			frame : false,
			layout : &#x27;hbox&#x27;,
			title : &#x27;Macromolecule&#x27;,
			bodyPadding : &#x27;5&#x27;,
			width : 890,
			margin : &#x27;0 0 10 0&#x27;,
			height : 100,
			style : {
				borderColor : &#x27;#BDBDBD&#x27;,
				borderStyle : &#x27;solid&#x27;,
				borderWidth : &#x27;1px&#x27;
			},
			fieldDefaults : {
				msgTarget : &#x27;side&#x27;,
				labelWidth : 100
			},
			items : [ {
				margin : &quot;10 0 0 10&quot;,
				width : 475,
				border : 0,
				html : getHTMLSource(macromoleculeId)
			}, {
				margin : &quot;10 0 0 10&quot;,
				width : 475,
				border : 0,
				html : BUI.getZipHTMLByMacromoleculeId(macromoleculeId)
			}
			]
		});
	},

	getZipHTMLByMacromoleculeId : function(macromoleculeId) {
		if (macromoleculeId != null) {
			var fileName = BIOSAXS.proposal.getMacromoleculeById(macromoleculeId).acronym;
			return &quot;&lt;div&gt;&lt;a style=&#x27;color:blue;&#x27; href=&#x27;/ispyb/user/dataadapter.do?reqCode=getZipFileByMacromoleculeId&amp;fileName=&quot; + fileName +
				&quot;&amp;macromoleculeId=&quot; + macromoleculeId + &quot;&#x27;&gt;&lt;img src=&#x27;../images/download.png&#x27; /&gt; Download&lt;/a&gt;&lt;/div&gt;&quot;;
		}
	},
	getZipHTMLByExperimentId : function(experimentId, filename) {
		if (filename == null){
			filename = &quot;experiment&quot;;
		}
		return &quot;&lt;div&gt;&lt;a style=&#x27;color:blue;&#x27; href=&#x27;/ispyb/user/dataadapter.do?reqCode=getZipFileByExperimentId&amp;fileName=&quot; + filename +
		       &quot;&amp;experimentId=&quot; + experimentId + &quot;&#x27;&gt;&lt;img src=&#x27;../images/download.png&#x27; /&gt; Download&lt;/a&gt;&lt;/div&gt;&quot;;
	},
	
	getZipURLByAverageId : function(averageId, filename) {
		if (filename == null){
			filename = &quot;experiment&quot;;
		}
		return &quot;/ispyb/user/dataadapter.do?reqCode=getZipFileByAverageListId&amp;f&amp;mergeIdsList=&quot; + averageId + &quot;&amp;fileName=&quot; + filename;
	},
	getZipURLBySubtractionId : function(subtractionId, filename) {
		if (filename == null){
			filename = &quot;experiment&quot;;
		}
		return &quot;/ispyb/user/dataadapter.do?reqCode=getZipFileByAverageListId&amp;f&amp;subtractionIdList=&quot; + subtractionId + &quot;&amp;fileName=&quot; + filename;
	},
	
	
	getZipHTMLByFrameRangeId : function(experimentId, start, end) {
		var fileName = &quot;experiment&quot;;
		return &quot;&lt;div&gt;&lt;a style=&#x27;color:blue;&#x27; href=&#x27;/ispyb/user/dataadapter.do?reqCode=getZipFileH5ByFramesRange&amp;f&amp;experimentId=&quot; + experimentId + 
		       &quot;&amp;start=&quot; + Number(start) +&quot;&amp;end=&quot;+ Number(end)+&quot;&#x27;&gt;&lt;img src=&#x27;../images/download.png&#x27; /&gt; Download&lt;/a&gt;&lt;/div&gt;&quot;;
	},
	getZipFrameHPLCUrl : function(experimentId, start, end) {
		return &quot;/ispyb/user/dataadapter.do?reqCode=getZipFileH5ByFramesRange&amp;f&amp;experimentId=&quot; + experimentId + &quot;&amp;start=&quot; + Number(start) +&quot;&amp;end=&quot;+ Number(end);
	},
	
	getQueueUrl : function() {
		return &quot;/ispyb/user/dataadapter.do?reqCode=getPagingCompactAnalysisByProposalId&quot;;
	},
	
	getQueueUrlByExperiment: function(experimentId) {
		return &quot;/ispyb/user/dataadapter.do?reqCode=getPagingCompactAnalysisByExperimentId&amp;f&amp;experimentId=&quot; + experimentId;
	},
	getStandardDeviation : function(values) {
		var sum = 0;
		var count = 0;
		var avg = null;

		var curatedValues = [];
		for ( var i = 0; i &lt; values.length; i++) {
			var value = values[i];
			if (value != null) {
				if (!isNaN(value)) {
					count = count + 1;
					sum = sum + Number(value);
					curatedValues.push(Number(value));
				}
			}
		}

		if (count &gt; 0) {
			avg = sum / count;
		} else {
			avg = sum;
		}
		var aux = 0;
		for ( i = 0; i &lt; curatedValues.length; i++) {
			aux = aux + Math.pow(curatedValues[i] - avg, 2);
		}
		/** std **/
		var std = Math.sqrt(aux / count);
		return {
			std : (std),
			sum : (sum),
			avg : (avg),
			validNumber : count,
			totalNumber : values.length,
			values : values
		};
	},
	
	getHTMLTableForFrameAveraged : function(bufferAcronym, macromoleculeAcronym, bbmerges, molmerges, bamerges, totalframes, bufferId,macromoleculeId, macromoleculeColor) {
		
		function getFrameSpan(framesMerged, total) {
			return &quot;&lt;td style=&#x27;font:normal 9px tahoma,arial,verdana,sans-serif;color:&quot; + &quot;black&quot; + &quot;&#x27;&gt;(&quot; + framesMerged + &quot; of &quot; + total + &quot;)&lt;/td&gt;&quot;;
		}

		function getColorFrame(framesMerged, total) {
			if (framesMerged / total &lt; 0.5) {
				return &quot;#FA5858&quot;;
			}
			if ((framesMerged / total &gt;= 0.5) &amp;&amp; (framesMerged / total &lt; 0.8)) {
				return &quot;#FF9900&quot;;
			}
			return &quot;white&quot;;
		}

		function getRow(color, acroynm, framesMerged, totalframes) {
			return 	&quot;&lt;tr style=&#x27;background-color:&quot; +
					getColorFrame(framesMerged, totalframes) +
					&quot;;height:12px;padding:1px;&#x27;&gt;&lt;td style=&#x27; width:10px; height:10px;&#x27;&gt; &quot;  +
					BUI.getRectangleColorDIV(color, 10, 10) +
					&quot;&lt;/td&gt; &lt;td style=&#x27;padding:5px;&#x27;&gt; &quot; + acroynm + &quot;&lt;/td&gt;&quot; +
					getFrameSpan(framesMerged, totalframes) + &quot;&lt;/tr&gt;&quot;;
		}

		var html = &quot;&lt;table style=&#x27;margin: 1,1,1,1;width:100%;font:normal 10px tahoma,arial,verdana,sans-serif;&#x27;&gt;&quot;;

		/** Buffer Before **/
		if (bufferAcronym != null) {
			if (bbmerges != null) {
				color = BIOSAXS.proposal.bufferColors[bufferId];
				html = html + getRow(color, bufferAcronym, bbmerges, totalframes);
			}
		}

		/** Molecule **/
		if (macromoleculeAcronym != null) {
			if (molmerges != null) {
				if (macromoleculeColor == null){
					color = BIOSAXS.proposal.macromoleculeColors[macromoleculeId];
				}
				else{
					color = macromoleculeColor; //BIOSAXS.proposal.macromoleculeColors[macromoleculeId];
				}
				html = html + getRow(color, macromoleculeAcronym, molmerges, totalframes);
			}
		}

		/** Buffer After **/
		if (bufferAcronym != null) {
			if (bamerges != null) {
				color = BIOSAXS.proposal.bufferColors[bufferId];
				html = html + getRow(color, bufferAcronym, bamerges, totalframes);
			}
		}
		return html + &quot;&lt;/table&gt;&quot;;
	},
	isWebGLEnabled : function(return_context) {
		if (!!window.WebGLRenderingContext) {
			var canvas = document.createElement(&quot;canvas&quot;);
			names = [ &quot;webgl&quot;, &quot;experimental-webgl&quot;, &quot;moz-webgl&quot;, &quot;webkit-3d&quot; ];
			context = false;
			for ( var i = 0; i &lt; 4; i++) {
				try {
					context = canvas.getContext(names[i]);
					if (context &amp;&amp; typeof context.getParameter == &quot;function&quot;) {
						// WebGL is enabled                    
						if (return_context) {
							// return WebGL object if the function&#x27;s argument is present
							return {
								name : names[i],
								gl : context
							};
						}
						// else, return just true
						return true;
					}
				} catch (e) {
				}
			}
			// WebGL is supported, but disabled
			return false;
		}
		// WebGL not supported28.    
		return false;
	},
	getHTMLTableForPrefixes : function(bufferBeforeaverageFilePath, averageFilePath, bufferAfterAverageFilePath) {

		function getRow(bufferBeforeaverageFilePath) {
			file = bufferBeforeaverageFilePath;
			try {
				file = bufferBeforeaverageFilePath.split(&quot;/&quot;)[bufferBeforeaverageFilePath.split(&quot;/&quot;).length - 1];
			} catch (e) {
				file = &quot;NA&quot;;
			}
			return &quot;&lt;tr&gt;&lt;td  style=&#x27;height:12px;padding:5px;&#x27;&gt;&quot; + file + &quot;&lt;/td&gt;&lt;/tr&gt;&quot;;
		}
		var html = &quot;&lt;table style=&#x27;margin: 1,1,1,1;width:100%;font:normal 10px tahoma,arial,verdana,sans-serif;&#x27;&gt;&quot;;

		/** Buffer Before **/
		if (bufferBeforeaverageFilePath != null) {
			html = html + getRow(bufferBeforeaverageFilePath);
		}

		/** Molecule **/
		if (averageFilePath != null) {
			html = html + getRow(averageFilePath);
		}

		/** Buffer After **/
		if (bufferAfterAverageFilePath != null) {
			html = html + getRow(bufferAfterAverageFilePath);
		}
		return html + &quot;&lt;/table&gt;&quot;;
	},

	getBaseURL : function() {
		return &#x27;/ispyb/user/dataadapter.do&#x27;;
	},

	getPrintcomponentURL : function(dewarId) {
		return &#x27;/ispyb/user/viewDewarAction.do?reqCode=generateLabels&amp;dewarId=&#x27; + dewarId;

	},
	getPDBVisualizerURL : function(modelId, subtractionId, experimentId) {
		return &#x27;/ispyb/user/viewProjectList.do?reqCode=display&amp;menu=PDBVisualizer&amp;modelId=&#x27; + modelId + &#x27;&amp;experimentId=&#x27; + experimentId +
			&#x27;&amp;subtractionId=&#x27; + subtractionId;
	},

	getURL : function() {
		return this.getBaseURL() + &#x27;?reqCode=getImage&#x27;;

	},
	getAbinitioImageURL : function() {
		return this.getBaseURL() + &#x27;?reqCode=getAbinitioImage&#x27;;
	},
	getNSDImageURL : function(modelListId) {
		return BUI.getAbinitioImageURL() + &#x27;&amp;type=NSD&amp;modelListId=&#x27; + modelListId;
	},
	getCHI2ImageURL : function(modelListId) {
		return BUI.getAbinitioImageURL() + &#x27;&amp;type=CHI2&amp;modelListId=&#x27; + modelListId;
	},
	getModelFile : function(type, modelId, format) {
		return this.getBaseURL() + &#x27;?reqCode=getModelFile&#x27; + &quot;&amp;type=&quot; + type + &quot;&amp;modelId=&quot; + modelId + &quot;&amp;format=&quot; + format;
	},
	getPdbURL : function() {
		return this.getBaseURL() + &#x27;?reqCode=getPdbFiles&#x27;;
	},
	getStvArray : function(value, error) {
		value = Number(value);
		error = Number(error);
		return [ value - error, value, value + error ];
	},
	getPointArrayForDygraph : function(x, y, error) {
		return [ x, BUI.getStvArray(y, error) ];
	},
	createDIV : function(text, width, className, backgroundColor) {
		var nameContainer = document.createElement(&quot;div&quot;);
		var nameSpan = document.createElement(&quot;span&quot;);
		if (className != null) {
			nameSpan.setAttribute(&quot;class&quot;, className);
		}
		if (backgroundColor != null) {
			nameSpan.setAttribute(&quot;style&quot;, &quot;float:left;width:&quot; + width + &quot;px;height:18px;background-color:&quot; + backgroundColor);
		} else {
			nameSpan.setAttribute(&quot;style&quot;, &quot;float:left;width:&quot; + width + &quot;px;height:18px;&quot;);
		}
		nameSpan.appendChild(document.createTextNode(text));
		nameContainer.appendChild(nameSpan);
		return nameContainer;
	},

	createFormLabel : function(labelText, text, labelWidth, textWidth, backgroundColor) {
		var div = document.createElement(&quot;div&quot;);

		div.appendChild(BUI.createDIV(labelText, labelWidth, &quot;bLabel&quot;, backgroundColor));
		div.appendChild(BUI.createDIV(text, textWidth, &quot;btext&quot;, backgroundColor));
		return div.innerHTML;
	},

	createTextArea : function(labelText, text, labelWidth, rows, cols) {
		var div = document.createElement(&quot;div&quot;);
		div.appendChild(BUI.createDIV(labelText, labelWidth, &quot;bLabel&quot;));
		var textArea = document.createElement(&quot;textarea&quot;);
		textArea.setAttribute(&quot;rows&quot;, rows);
		textArea.setAttribute(&quot;cols&quot;, cols);
		textArea.appendChild(document.createTextNode(text));
		div.appendChild(textArea);
		return div.innerHTML;
	},

	showBetaWarning : function() {
		alert(&quot;ISPyB for Biosaxs version Beta has not this functionality enabled&quot;);
	},

	formatValuesErrorUnitsScientificFormat : function(val, error, unit, args) {
		var fontSize = 14;
		var decimals = 2;
		var errorFontSize = 10;
		/** line break **/
		var lineBreak = false;
		if (args != null) {
			if (args.fontSize != null) {
				fontSize = args.fontSize;
			}
			if (args.decimals != null) {
				decimals = args.decimals;
			}
			if (args.errorFontSize != null) {
				errorFontSize = args.errorFontSize;
			}
			if (args.lineBreak != null) {
				lineBreak = args.lineBreak;
			}

		}

		if (val == &quot;&quot;) {
			return &quot;&quot;;
		}
		if (error == null) {
			return &quot;&lt;span style=&#x27;font-size:&quot; + fontSize + &quot;px&#x27;&gt;&quot; + Number(val).toFixed(decimals) + &quot;&lt;/span&gt;&quot;;
		}
		var html = &quot;&lt;span style=&#x27;font-size:&quot; + fontSize + &quot;px&#x27;&gt;&quot; + Number(val).toFixed(decimals) + &quot;&lt;span style=&#x27;font-size:&quot; + errorFontSize +
			   &quot;px;color:gray&#x27;&gt;  &quot; + unit + &quot;&lt;/span&gt;&lt;/span&gt;&quot;;
		if (lineBreak) {
			html = html + &quot;&lt;br/&gt;&quot;;
		}
		return html + &quot;&lt;span style=&#x27;font-size:&quot; + errorFontSize + &quot;px&#x27;&gt; &amp;#177; &quot; + Number(Number(error).toFixed(3)).toExponential() +
			      &quot;&lt;/span&gt;&lt;/span&gt;&quot;;
	},

	formatValuesErrorUnits : function(val, error, unit, args) {
		var fontSize = 16;
		var decimals = 2;
		var errorFontSize = 10;
		/** line break **/
		var lineBreak = true;
		if (args != null) {
			if (args.fontSize != null) {
				fontSize = args.fontSize;
			}
			if (args.decimals != null) {
				decimals = args.decimals;
			}
			if (args.errorFontSize != null) {
				errorFontSize = args.errorFontSize;
			}
			if (args.lineBreak != null) {
				lineBreak = args.lineBreak;
			}

		}

		if (val == &quot;&quot;) {
			return &quot;&quot;;
		}
		if (error == null) {
			return &quot;&lt;span style=&#x27;font-size:&quot; + fontSize + &quot;px&#x27;&gt;&quot; + Number(val).toFixed(decimals) + &quot;&lt;/span&gt;&quot;;
		}
		var html = &quot;&lt;span style=&#x27;font-size:&quot; + fontSize + &quot;px&#x27;&gt;&quot; + Number(val).toFixed(decimals) + &quot;&lt;span style=&#x27;font-size:&quot; + errorFontSize +
			   &quot;px;color:gray&#x27;&gt;  &quot; + unit + &quot;&lt;/span&gt;&lt;/span&gt;&quot;;
		if (lineBreak) {
			html = html + &quot;&lt;br/&gt;&quot;;
		}
		return html + &quot;&lt;span style=&#x27;font-size:&quot; + errorFontSize + &quot;px&#x27;&gt; &amp;#177; &quot; + Number(Number(error).toFixed(8)).toExponential() +
			      &quot;&lt;/span&gt;&lt;/span&gt;&quot;;
	},

	formatValuesUnits : function(val, unit, args) {
		var fontSize = 12;
		var decimals = 2;
		var unitsFontSize = 10;
		if (args != null) {
			if (args.fontSize != null) {
				fontSize = args.fontSize;
			}
			if (args.decimals != null) {
				decimals = args.decimals;
			}
			if (args.unitsFontSize != null) {
				unitsFontSize = args.unitsFontSize;
			}

		}

		if (val == &quot;&quot;) {
			return &quot;&quot;;
		}
		
		if (unit == null) {
			return &quot;&lt;span style=&#x27;font-size:&quot; + fontSize + &quot;px&#x27;&gt;&quot; + Number(val).toFixed(decimals) + &quot;&lt;/span&gt;&quot;;
		}
		return &quot;&lt;span style=&#x27;font-size:&quot; + fontSize + &quot;px&#x27;&gt;&quot; + Number(val).toFixed(decimals) + &quot; &lt;/span&gt;&lt;span style=&#x27;font-size:&quot; + unitsFontSize +
		       &quot;px;color:gray&#x27;&gt;  &quot; + unit + &quot;&lt;/span&gt;&lt;/span&gt;&quot;;
	},

	getGreenButton : function(text, args) {
		var width = 70;
		var height = 20;
		if (args != null) {
			if (args.width != null) {
				width = args.width;
			}
			if (args.height != null) {
				height = args.height;
			}
		}

		return &#x27;&lt;input type=&quot;button&quot; name=&quot;btn&quot; style= &quot;font-size:9px;width:&#x27; + width + &#x27;px; height:&#x27; + height + &#x27;px&quot; class=&quot;btn-green&quot; value=&quot;&#x27; + text + &#x27;&quot;/&gt;&#x27;;
	},
	getBlueButton : function(text, args) {
			var width = 70;
			var height = 20;
			if (args != null) {
				if (args.width != null) {
					width = args.width;
				}
				if (args.height != null) {
					height = args.height;
				}
			}

			return &#x27;&lt;input type=&quot;button&quot; name=&quot;btn&quot; style= &quot;font-size:9px;width:&#x27; + width + &#x27;px; height:&#x27; + height + &#x27;px&quot; class=&quot;btn-blue&quot; value=&quot;&#x27; + text + &#x27;&quot;/&gt;&#x27;;
	},

	getSubmitGreenButton : function(text) {
		return &#x27;&lt;input type=&quot;submit&quot; type=&quot;button&quot; name=&quot;btn&quot; class=&quot;btn-green&quot; value=&quot;&#x27; + text + &#x27;&quot;/&gt;&#x27;;
	},

	getRedButton : function(text) {
		return &#x27;&lt;input type=&quot;button&quot;  name=&quot;btn&quot; class=&quot;btn-red&quot; value=&quot;&#x27; + text + &#x27;&quot; /&gt;&#x27;;

	},
	getRectangleColorDIV : function(color, height, width) {
		return &#x27;&lt;div style=&quot;border: 1px solid gray;background-color: &#x27; + color + &#x27;; height:&#x27; + height + &#x27;px;width:&#x27; + width + &#x27;px&quot; &gt;&lt;/div&gt;&#x27;;
	},

	openBufferWindow : function(bufferId) {
		var window = new BufferWindow();
		window.draw(tabs.experiment.getBufferById(bufferId), tabs.experiment);
	},

	/** Render for safety levels on grids **/
	safetyRenderer : function(val, y, specimen) {
		var color = val;
		if (val == &quot;YELLOW&quot;) {
			color = &quot;#E9AB17&quot;;
		}
		return &#x27;&lt;span style=&quot;color:&#x27; + color + &#x27;;&quot;&gt;&#x27; + val + &#x27;&lt;/span&gt;&#x27;;
	},

	getSampleColor : function() {
		return &#x27;#CB181D&#x27;;
	},

	getLightSampleColor : function() {
		return &#x27;#FCBBA1&#x27;;
	},

	getBufferColor : function() {
		return &#x27;#6A51A3&#x27;;
	},
	getLightBufferColor : function() {
		return &#x27;#BCBDDC&#x27;;
	},

	formatConcentration : function(val) {
		if (val != null) {
			return &quot;&lt;span style=&#x27;font-size:16px&#x27;&gt;&quot; + Number(val).toFixed(2) + &quot;&lt;/span&gt;&lt;span style=&#x27;font-size:9px&#x27;&gt; mg/ml &lt;/span&gt;&quot;;
		}
		return val;
	},

	formatVolume : function(sample, volume) {
		if (Number(sample.data.volumeToLoad) &gt; Number(sample.data.volume)) {
			return &quot;&lt;span style=&#x27;color:red;font-weight:bold;&#x27;&gt;&quot; + volume + &quot;&lt;/span&gt;&lt;span style=&#x27;font-size:9;color:red;&#x27;&gt; ï¿½l&lt;/span&gt;&quot;;
		}
		if (Number(sample.data.volumeToLoad) == Number(sample.data.volume)) {
			return &quot;&lt;span style=&#x27;color:orange;font-weight:bold;&#x27;&gt;&quot; + volume + &quot;&lt;/span&gt;&lt;span style=&#x27;font-size:9;color:orange;&#x27;&gt; ï¿½l&lt;/span&gt;&quot;;
		}
		return &quot;&lt;span&gt;&quot; + volume + &quot;&lt;/span&gt;&lt;span style=&#x27;font-size:9&#x27;&gt; ï¿½l&lt;/span&gt;&quot;;
	},

	getProposal : function() {
		return new Proposal();
	},

	getSampleNameRenderer : function(val, y, record) {
		var sample = record.data;
		if (record.raw.macromolecule3VO == null) {
			return &#x27;&lt;span style=&quot;color:blue;&quot;&gt;&#x27; + sample.code + &#x27;&lt;/span&gt;&#x27;;
		} else {
			return &#x27;&lt;span style=&quot;color:green;&quot;&gt;&#x27; + sample.code + &#x27;&lt;/span&gt;&#x27;;
		}
	},

	getSafetyLevels : function() {
		var safetyLevels = [];
		safetyLevels.push({
			safetyLevelId : &quot;&quot;,
			name : &quot;UNKNOWN&quot;
		});
		safetyLevels.push({
			safetyLevelId : 1,
			name : &quot;GREEN&quot;
		});
		safetyLevels.push({
			safetyLevelId : 2,
			name : &quot;YELLOW&quot;
		});
		safetyLevels.push({
			safetyLevelId : 3,
			name : &quot;RED&quot;
		});
		return safetyLevels;
	},

	getErrorColor : function() {
		return &#x27;#F6CED8&#x27;;
	},
	getWarningColor : function() {
		return &#x27;#F5DA81&#x27;;
	},
	getValidColor : function() {
		return &#x27;#E0F8E0&#x27;;
	},
	getSamplePlateLetters : function() {
		return [ &quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;, &quot;G&quot;, &quot;H&quot; ];
	},
	getSamplePositionHTML : function(sample, experiment) {
		var plate = &quot;&quot;;
		var row = &quot;&quot;;
		var column = &quot;&quot;;
		var rows = this.getSamplePlateLetters();
		if (sample.sampleplateposition3VO != null) {
			var samplePlate = experiment.getSamplePlateById(sample.sampleplateposition3VO.samplePlateId);
			if (samplePlate != null) {
				plate = (samplePlate.slotPositionColumn);
				row = (sample.sampleplateposition3VO.rowNumber);
				column = (sample.sampleplateposition3VO.columnNumber);
				//				   var html = &quot;&lt;span style=&#x27;font-weight:italic&#x27;&gt;Plate: &lt;/span&gt;&quot; + &quot;&lt;span style=&#x27;font-weight:bold&#x27;&gt;&quot; + plate + &quot;&lt;/span&gt;&quot;;
				//				   html = html +  &quot;&lt;span style=&#x27;font-weight:italic&#x27;&gt;, Row: &lt;/span&gt;&quot; + &quot;&lt;span style=&#x27;font-weight:bold&#x27;&gt;&quot; +  rows[row - 1] + &quot;&lt;/span&gt;&quot;;
				//				   html = html +  &quot;&lt;span style=&#x27;font-weight:italic&#x27;&gt;, Column: &lt;/span&gt;&quot; + &quot;&lt;span style=&#x27;font-weight:bold&#x27;&gt;&quot; + column + &quot;&lt;/span&gt;&quot;;
				var html = &quot;&lt;span style=&#x27;font-weight:italic&#x27;&gt;Plate: &lt;/span&gt;&lt;span style=&#x27;font-weight:bold&#x27;&gt;&quot; + plate +
					   &quot;&lt;/span&gt;-&lt;span style=&#x27;font-weight:bold&#x27;&gt;&quot; + rows[row - 1] + &quot;&lt;/span&gt;&lt;span style=&#x27;font-weight:bold&#x27;&gt;&quot; + column + &quot;&lt;/span&gt;&quot;;
				return html;
			}
		}
		return &quot;&quot;;
	},

	getSafetyLabelName : function(safetyLevelId) {
		var safetyLevels = BUI.getSafetyLevels();
		for ( var i = 0; i &lt; safetyLevels.length; i++) {
			if (safetyLevels[i].safetyLevelId == safetyLevelId) {
				return safetyLevels[i].name;
			}
		}
		return &quot;UNKNOWN&quot;;
	},
	/** generate random id **/
	id : function() {
		var text = &quot;&quot;;
		var possible = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789&quot;;

		for ( var i = 0; i &lt; 5; i++){
			text += possible.charAt(Math.floor(Math.random() * possible.length));
		}

		return &quot;ExiSAXS&quot; + text;
	},
	showWarning : function(message) {
		Ext.Msg.show({
			title : &#x27;Warning&#x27;,
			msg : message,
			icon : Ext.Msg.WARNING,
			animEl : &#x27;elId&#x27;
		});
	},
	showError : function(message) {
		Ext.Msg.show({
			title : &#x27;Warning&#x27;,
			msg : message,
			icon : Ext.Msg.ERROR,
			animEl : &#x27;elId&#x27;
		});
	},
	getTipHTML : function(message) {
		//return &quot;&lt;div  class=&#x27;panelMacro&#x27; &gt;&lt;table class=&#x27;tipMacro&#x27;&gt;&lt;colgroup span=&#x27;1&#x27;&gt;&lt;col span=&#x27;1&#x27; width=&#x27;24&#x27;&gt;&lt;col span=&#x27;1&#x27;&gt;&lt;/colgroup&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td colspan=&#x27;1&#x27; rowspan=&#x27;1&#x27; valign=&#x27;top&#x27;&gt;&lt;img align=&#x27;middle&#x27; src=&#x27;https://cwiki.apache.org/confluence/images/emoticons/check.gif&#x27; width=&#x27;16&#x27; height=&#x27;16&#x27; alt=&#x27;&#x27; border=&#x27;0&#x27;&gt;&lt;/td&gt;&lt;td colspan=&#x27;1&#x27; rowspan=&#x27;1&#x27;&gt;&lt;b&gt;Tip&lt;/b&gt;&lt;br clear=&#x27;none&#x27;&gt;&quot;
		//		+ message + &quot;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&quot;;
		return &quot;&lt;div  class=&#x27;panelMacro&#x27; &gt;&lt;table class=&#x27;tipMacro&#x27;&gt;&lt;colgroup span=&#x27;1&#x27;&gt;&lt;col span=&#x27;1&#x27; width=&#x27;24&#x27;&gt;&lt;col span=&#x27;1&#x27;&gt;&lt;/colgroup&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td colspan=&#x27;1&#x27; rowspan=&#x27;1&#x27; valign=&#x27;top&#x27;&gt;&lt;/td&gt;&lt;td colspan=&#x27;1&#x27; rowspan=&#x27;1&#x27;&gt;&lt;b&gt;Tip&lt;/b&gt;&lt;br clear=&#x27;none&#x27;&gt;&quot; +
			message + &quot;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&quot;;
	},

	getWarningHTML : function(message) {
		return &quot;&lt;div class=&#x27;panelMacro&#x27; &gt;&lt;table class=&#x27;warningMacro&#x27;&gt;&lt;colgroup span=&#x27;1&#x27;&gt;&lt;col span=&#x27;1&#x27; width=&#x27;24&#x27;&gt;&lt;col span=&#x27;1&#x27;&gt;&lt;/colgroup&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td colspan=&#x27;1&#x27; rowspan=&#x27;1&#x27; valign=&#x27;top&#x27;&gt;&lt;/td&gt;&lt;td colspan=&#x27;1&#x27; rowspan=&#x27;1&#x27;&gt;&lt;b&gt;Warning&lt;/b&gt;&lt;br clear=&#x27;none&#x27;&gt;&quot; +
			message + &quot;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&quot;;
	},

	getErrorHTML : function(message) {
		return &quot;&lt;div class=&#x27;panelMacro&#x27; &gt;&lt;table class=&#x27;errorMacro&#x27;&gt;&lt;colgroup span=&#x27;1&#x27;&gt;&lt;col span=&#x27;1&#x27; width=&#x27;24&#x27;&gt;&lt;col span=&#x27;1&#x27;&gt;&lt;/colgroup&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td colspan=&#x27;1&#x27; rowspan=&#x27;1&#x27; valign=&#x27;top&#x27;&gt;&lt;img align=&#x27;middle&#x27; src=&#x27;https://cwiki.apache.org/confluence/images/emoticons/forbidden.gif&#x27; width=&#x27;16&#x27; height=&#x27;16&#x27; alt=&#x27;&#x27; border=&#x27;0&#x27;&gt;&lt;/td&gt;&lt;td colspan=&#x27;1&#x27; rowspan=&#x27;1&#x27;&gt;&lt;b&gt;Error&lt;/b&gt;&lt;br clear=&#x27;none&#x27;&gt;&quot; +
			message + &quot;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&quot;;
	},

	getProgessBar : function(percentage, text) {
		/** percentage 100% green **/
		var color = &quot;#0a0&quot;;

		color = &quot;#99CC00&quot;;
		if (percentage &gt; 100) {
			color = &quot;yellow&quot;;
			percentage = 100;
		}
		if (isNaN(percentage)) {
			color = &quot;white&quot;;
			percentage = 0;
		}

		var defaultText = percentage + &quot;%&quot;;
		if (text != null) {
			defaultText = text;
		}

		return &quot;&lt;div class=&#x27;meter-wrap&#x27;&gt;&lt;div class=&#x27;meter-value&#x27; style=&#x27;background-color: &quot; + color + &quot; ; width: &quot; + percentage +
		       &quot;%;&#x27;&gt;&lt;div class=&#x27;meter-text&#x27;&gt;&quot; + defaultText + &quot;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&quot;;
	},
	getFileName : function(filePath){
		if (filePath != null){
			return filePath.split(&quot;/&quot;)[filePath.split(&quot;/&quot;).length - 1];
		}
		return &quot;&quot;;
	}

};

//
//
//
//
//Ext.define(&#x27;Ext.form.field.RequiredNumber&#x27;, {
//	extend : &#x27;Ext.form.field.Number&#x27;,
//	alias : &#x27;widget.requirednumberfield&#x27;,
//	alternateClassName : [ &#x27;Ext.form.RequiredNumberField&#x27;, &#x27;Ext.form.RequiredNumber&#x27; ],
//	config : {
//		cls : &#x27;custom-field-text-required&#x27;
//	},
//
//	initComponent : function() {
//		var me = this;
//		me.callParent();
//		me.setMinValue(me.minValue);
//		me.setMaxValue(me.maxValue);
//	},
//
//	onChange : function() {
//		if ((this.getValue() == null) || String(this.getValue()).length == 0) {
//			this.addCls(&#x27;custom-field-text-required&#x27;);
//		} else {
//			this.removeCls(&#x27;custom-field-text-required&#x27;);
//		}
//		this.toggleSpinners();
//		this.callParent(arguments);
//	}
//});
//
//
//Ext.define(&#x27;Ext.form.field.RequiredText&#x27;, {
//	extend : &#x27;Ext.form.field.Text&#x27;,
//	alias : &#x27;widget.requiredtext&#x27;,
//	requires : [ &#x27;Ext.form.field.VTypes&#x27;, &#x27;Ext.layout.component.field.Text&#x27; ],
//	alternateClassName : [ &#x27;Ext.form.RequiredTextField&#x27;, &#x27;Ext.form.RequiredText&#x27; ],
//	config : {
//		cls : &#x27;custom-field-text-required&#x27;
//	},
//	initComponent : function() {
//		var me = this;
//		if (me.allowOnlyWhitespace === false) {
//			me.allowBlank = false;
//		}
//		me.callParent();
//		me.addEvents(
//		/**
//		 * @event autosize
//		 * Fires when the **{@link #autoSize}** function is triggered and the field is resized according to the
//		 * {@link #grow}/{@link #growMin}/{@link #growMax} configs as a result. This event provides a hook for the
//		 * developer to apply additional logic at runtime to resize the field if needed.
//		 * @param {Ext.form.field.Text} this This text field
//		 * @param {Number} width The new field width
//		 */
//		&#x27;autosize&#x27;,
//
//		/**
//		 * @event keydown
//		 * Keydown input field event. This event only fires if **{@link #enableKeyEvents}** is set to true.
//		 * @param {Ext.form.field.Text} this This text field
//		 * @param {Ext.EventObject} e
//		 */
//		&#x27;keydown&#x27;,
//		/**
//		 * @event keyup
//		 * Keyup input field event. This event only fires if **{@link #enableKeyEvents}** is set to true.
//		 * @param {Ext.form.field.Text} this This text field
//		 * @param {Ext.EventObject} e
//		 */
//		&#x27;keyup&#x27;,
//		/**
//		 * @event keypress
//		 * Keypress input field event. This event only fires if **{@link #enableKeyEvents}** is set to true.
//		 * @param {Ext.form.field.Text} this This text field
//		 * @param {Ext.EventObject} e
//		 */
//		&#x27;keypress&#x27;);
//		me.addStateEvents(&#x27;change&#x27;);
//		me.setGrowSizePolicy();
//	},
//	checkChange : function() {
//		if ((this.getValue() == null) || String(this.getValue()).length == 0) {
//			this.addCls(&#x27;custom-field-text-required&#x27;);
//		} else {
//			this.removeCls(&#x27;custom-field-text-required&#x27;);
//		}
//	}
//});







var BIOSAXS_COMBOMANAGER = {
	getComboProposal : function(args) {
		var labelWidth = null;
		var width = 400;
		
		var id =&#x27;proposalIdCombo&#x27;;
		if (args != null){
			if (args.labelWidth != null){
				labelWidth = args.labelWidth;
			}
			if (args.width != null){
				width = args.width;
			}
			if (args.id != null){
				id = args.id;
			}
		}
		var proposalStore = Ext.create(&#x27;Ext.data.Store&#x27;, {
			fields : [ &#x27;code&#x27;, &#x27;number&#x27;, &#x27;title&#x27;, &#x27;proposalId&#x27;, &#x27;proposal&#x27; ],
			data : EXI.proposalManager.getProposals() });

		return Ext.create(&#x27;Ext.form.ComboBox&#x27;, {
			fieldLabel : &#x27;Proposal&#x27;,
			id : id,
			width : width,
			store : proposalStore,
			labelWidth : labelWidth,
			queryMode : &#x27;local&#x27;,
			displayField : &#x27;proposal&#x27;,
			valueField : &#x27;proposalId&#x27; 
		});
	},
	
	getComboMacromoleculeByMacromolecules : function(macromolecules, args) {
		var labelWidth = 150;
		var margin = &quot;0 0 5 0&quot;;
		var width = 300;

		if (args != null) {
			if (args.labelWidth != null) {
				labelWidth = args.labelWidth;
			}
			if (args.margin != null) {
				margin = args.margin;
			}
			if (args.width != null) {
				width = args.width;
			}
		}

		var store = Ext.create(&#x27;Ext.data.Store&#x27;, {
			fields : [ &#x27;macromoleculeId&#x27;, &#x27;acronym&#x27; ],
			data : macromolecules,
			sorters : [ &#x27;acronym&#x27; ]
		});

		return Ext.create(&#x27;Ext.form.ComboBox&#x27;, {
			fieldLabel : &#x27;Macromolecules&#x27;,
			labelWidth : labelWidth,
			width : width,
			margin : margin,
			store : store,
			editable: false,
			queryMode : &#x27;local&#x27;,
			displayField : &#x27;acronym&#x27;,
			valueField : &#x27;macromoleculeId&#x27;
		});
	},
	getComboBuffers : function(buffers, args) {
		var labelWidth = 150;
		var margin = &quot;0 0 5 0&quot;;
		var width = 300;
		var fieldLabel = &#x27;Buffer&#x27;;

		if (args != null) {
			if (args.labelWidth != null) {
				labelWidth = args.labelWidth;
			}
			if (args.margin != null) {
				margin = args.margin;
			}
			if (args.width != null) {
				width = args.width;
			}
			if (args.noLabel != null) {
				fieldLabel = null;
			}
		}

		var store = Ext.create(&#x27;Ext.data.Store&#x27;, {
			fields : [ &#x27;bufferId&#x27;, &#x27;acronym&#x27; ],
			data : buffers,
			sorters : [ &#x27;acronym&#x27; ]
		});

		return Ext.create(&#x27;Ext.form.ComboBox&#x27;, {
			fieldLabel : fieldLabel,
			labelWidth : labelWidth,
			width : width,
			margin : margin,
			editable: false,
			store : store,
			queryMode : &#x27;local&#x27;,
			displayField : &#x27;acronym&#x27;,
			valueField : &#x27;bufferId&#x27;
		});
	},
	getComboSessions : function(sessions, args) {
		var labelWidth = 150;
		var margin = &quot;0 0 5 0&quot;;
		var width = 300;

		if (args != null) {
			if (args.labelWidth != null) {
				labelWidth = args.labelWidth;
			}
			if (args.margin != null) {
				margin = args.margin;
			}
			if (args.width != null) {
				width = args.width;
			}
		}

		for ( var i = 0; i &lt; sessions.length; i++) {
			sessions[i][&quot;startDateFormatted&quot;] = moment(sessions[i].BLSession_startDate).format(&quot;DD/MM/YYYY&quot;);
			sessions[i][&quot;sorter&quot;] = moment(sessions[i].BLSession_startDate).format(&quot;YYYYMMDD&quot;);
		}

		var store = Ext.create(&#x27;Ext.data.Store&#x27;, {
			fields : [ &#x27;sessionId&#x27;, &#x27;startDateFormatted&#x27;, &#x27;beamLineName&#x27;, &#x27;BLSession_startDate&#x27;, &#x27;endDate&#x27;, &#x27;beamlineOperator&#x27; ],
			data : sessions,
			sorters : [ &#x27;sorter&#x27; ]
		});
        
		return Ext.create(&#x27;Ext.form.ComboBox&#x27;, {
			fieldLabel : &#x27;Session&#x27;,
			labelWidth : labelWidth,
			width : width,
			margin : margin,
			store : store,
			queryMode : &#x27;local&#x27;,
			valueField : &#x27;sessionId&#x27;,
			// Template for the dropdown menu.
			// Note the use of &quot;x-boundlist-item&quot; class,
			// this is required to make the items selectable.
			tpl : Ext.create(&#x27;Ext.XTemplate&#x27;, &#x27;&lt;tpl for=&quot;.&quot;&gt;&#x27;,
					&#x27;&lt;div class=&quot;x-boundlist-item&quot;&gt;{startDateFormatted}&lt;span style=&quot;font-weight:bold&quot;&gt; {beamLineName}&lt;/span&gt;&lt;/div&gt;&#x27;, &#x27;&lt;/tpl&gt;&#x27;),
			// template for the content inside text field
			displayTpl : Ext.create(&#x27;Ext.XTemplate&#x27;, &#x27;&lt;tpl for=&quot;.&quot;&gt;&#x27;, &#x27;{startDateFormatted} {beamLineName}&#x27;, &#x27;&lt;/tpl&gt;&#x27;)

		});
	},
	getComboStorageTemperature : function(args) {
		var labelWidth = 200;
		var width = 500;

		if (args != null) {
			if (args.labelWidth != null) {
				labelWidth = args.labelWidth;
			}
			if (args.width != null) {
				width = args.width;
			}
		}
		
		var storageLocations = Ext.create(&#x27;Ext.data.Store&#x27;, {
		    fields: [&#x27;value&#x27;, &#x27;name&#x27;],
		    data : [
		        {&quot;value&quot;:&quot;N/A&quot;, &quot;name&quot;:&quot;N/A&quot;},
		        {&quot;value&quot;:&quot;-80&quot;, &quot;name&quot;:&quot;-80&quot;},
		        {&quot;value&quot;:&quot;-20&quot;, &quot;name&quot;:&quot;-20&quot;},
		        {&quot;value&quot;:&quot;+4&quot;, &quot;name&quot;:&quot;+4&quot;},
		        {&quot;value&quot;:&quot;Room Temperature&quot;, &quot;name&quot;:&quot;Room Temperature&quot;}
		    ]
		});
		this.storageLocationComboBox = Ext.create(&#x27;Ext.form.ComboBox&#x27;, {
		    fieldLabel: &#x27;Storage Condition&#x27;,
		    store: storageLocations,
		    queryMode: &#x27;local&#x27;,
		    labelWidth : labelWidth,
		    width : width,
		    displayField: &#x27;name&#x27;,
		    valueField: &#x27;value&#x27;,
		    value : &#x27;Not set&#x27;
		});
		return this.storageLocationComboBox;
	},
	getComboPuckType : function(args) {
		var labelWidth = 200;
		var width = 500;
		var margin = null;
		
		if (args != null) {
			if (args.labelWidth != null) {
				labelWidth = args.labelWidth;
			}
			if (args.width != null) {
				width = args.width;
			}
			if (args.margin != null) {
				margin = args.margin;
			}
		}
		
		var storageLocations = Ext.create(&#x27;Ext.data.Store&#x27;, {
		    fields: [&#x27;value&#x27;, &#x27;name&#x27;],
		    data : [
		        {&quot;value&quot;:10, &quot;name&quot;:&quot;SPINE&quot;},
		        {&quot;value&quot;:16, &quot;name&quot;:&quot;UNIPUCK&quot;},
		        {&quot;value&quot;:96, &quot;name&quot;:&quot;PLATE&quot;}
		    ]
		});
		this.storageLocationComboBox = Ext.create(&#x27;Ext.form.ComboBox&#x27;, {
		    fieldLabel: &#x27;Type&#x27;,
		    store: storageLocations,
		    queryMode: &#x27;local&#x27;,
		    labelWidth : labelWidth,
		    width : width,
		    margin : margin,
		    displayField: &#x27;name&#x27;,
		    valueField: &#x27;value&#x27;,
		    value : &#x27;Not set&#x27;
		});
		return this.storageLocationComboBox;
	}
};
var MX_COMBOMANAGER = {
		getComboProteins : function(proteins, args) {
			var labelWidth = 150;
			var margin = &quot;10 10 10 40&quot;;
			var width = 300;

			if (args != null) {
				if (args.labelWidth != null) {
					labelWidth = args.labelWidth;
				}
				if (args.margin != null) {
					margin = args.margin;
				}
				if (args.width != null) {
					width = args.width;
				}
			}
			
			var store = Ext.create(&#x27;Ext.data.Store&#x27;, {
				fields : [ &#x27;name&#x27;, &#x27;acronym&#x27; ],
				data : proteins,
				sorters : [ &#x27;acronym&#x27; ]
			});

			return Ext.create(&#x27;Ext.form.ComboBox&#x27;, {
				fieldLabel : &#x27;Proteins&#x27;,
				labelWidth : labelWidth,
				width : width,
				margin : margin,
				store : store,
				editable: false,
				queryMode : &#x27;local&#x27;,
				displayField : &#x27;acronym&#x27;,
				valueField : &#x27;proteinId&#x27;
			});

		}
		
	};


    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
